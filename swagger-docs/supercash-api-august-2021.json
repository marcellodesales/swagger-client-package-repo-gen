{"swagger":"2.0","info":{"description":"Manage parking lot events such as ticket status and payments.","version":"v1","title":"SuperCash - Parking Plus Proxy Services","termsOfService":"https://gitlab.com/supercash/privacy","contact":{"name":"Marcello de Sales","url":"https://gitlab.com/marcellodesales","email":"marcello@super.cash"},"license":{"name":"SuperCash Proprietary","url":"https://github.com/supercash/proprietary"}},"host":"localhost:8080","basePath":"/","tags":[{"name":"parking-plus-payments-controller","description":"Parking Plus Payments Controller"},{"name":"parking-plus-sales-controller","description":"Parking Plus Sales Controller"},{"name":"parking-plus-tickets-controller","description":"Parking Plus Tickets Controller"}],"paths":{"/v1/parking_lots/payments/authorize":{"post":{"tags":["parking-plus-payments-controller"],"summary":"authorizeParkingTicketPayment","operationId":"/parking_lots/payments/authorize","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"paymentAuthorization","description":"paymentAuthorization","required":true,"schema":{"$ref":"#/definitions/ParkingTicketAuthorization"}},{"name":"supercash_tid","in":"header","description":"supercash_tid","required":true,"type":"string"},{"name":"supercash_uid","in":"header","description":"supercash_uid","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ParkingTicketAuthorizedPaymentStatus"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/v1/parking_lots/payments/status":{"post":{"tags":["parking-plus-payments-controller"],"summary":"getParkingTicketPaymentsStatus","operationId":"/parking_lots/payments/status","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"paymentsMadeQuery","description":"paymentsMadeQuery","required":true,"schema":{"$ref":"#/definitions/ParkingTicketPaymentsMadeQuery"}},{"name":"supercash_tid","in":"header","description":"supercash_tid","required":true,"type":"string"},{"name":"supercash_uid","in":"header","description":"supercash_uid","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ParkingTicketPaymentsMadeStatus"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/v1/parking_lots/sales":{"get":{"tags":["parking-plus-sales-controller"],"summary":"retrieveParkingSales","operationId":"/parking_lots/sales","produces":["application/json"],"parameters":[{"name":"supercash_tid","in":"header","description":"supercash_tid","required":true,"type":"string"},{"name":"supercash_uid","in":"header","description":"supercash_uid","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ParkingGarageSales"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/v1/parking_lots/tickets/status":{"post":{"tags":["parking-plus-tickets-controller"],"summary":"getTicketStatus","operationId":"/parking_lots/tickets/status","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"parkingTicket","description":"parkingTicket","required":true,"schema":{"$ref":"#/definitions/ParkingTicket"}},{"name":"supercash_tid","in":"header","description":"supercash_tid","required":true,"type":"string"},{"name":"supercash_uid","in":"header","description":"supercash_uid","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ParkingTicketStatus"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}}},"definitions":{"DadosCnpj":{"type":"object","required":["dadosEndereco","razaoSocial"],"properties":{"dadosEndereco":{"description":"Dados do endereço.","$ref":"#/definitions/DadosEndereco"},"email":{"type":"string","description":"Email."},"inscricaoEstadual":{"type":"string","description":"Inscrição Estadual."},"inscricaoMunicipal":{"type":"string","description":"Inscrição Municipal."},"razaoSocial":{"type":"string","description":"Razão Social."}},"title":"DadosCnpj"},"DadosCpf":{"type":"object","properties":{"email":{"type":"string","description":"Email."},"nome":{"type":"string","description":"Nome."}},"title":"DadosCpf"},"DadosEndereco":{"type":"object","required":["bairro","cep","cidade","endereco","ibge","numero","uf"],"properties":{"bairro":{"type":"string","description":"Bairro."},"cep":{"type":"string","description":"CEP."},"cidade":{"type":"string","description":"Cidade."},"complemento":{"type":"string","description":"Complemento."},"endereco":{"type":"string","description":"Endereço."},"ibge":{"type":"string","description":"Número IBGE."},"numero":{"type":"string","description":"Número."},"uf":{"type":"string","description":"UF.","enum":["AC","AL","AM","AP","BA","CE","DF","ES","GO","MA","MG","MS","MT","PA","PB","PE","PI","PR","RJ","RN","RO","RR","RS","SC","SE","SP","TO"]}},"title":"DadosEndereco"},"NotaInfo":{"type":"object","required":["cnpj","data","erro","qrCode","valida","valor"],"properties":{"cnpj":{"type":"string","description":"CNPJ do emissor"},"data":{"type":"string","format":"date-time","description":"Data da nota"},"erro":{"type":"string","description":"Mensagem de erro caso a nota seja inválida"},"qrCode":{"type":"string","description":"Código QR da nota"},"valida":{"type":"boolean","example":false,"description":"Se a nota é válida"},"valor":{"type":"integer","format":"int64","description":"Valor da nota"}},"title":"NotaInfo"},"PagamentoAutorizadoRequest":{"type":"object","required":["bandeira","idTransacao","numeroTicket","udid","valor"],"properties":{"bandeira":{"type":"string","description":"Bandeira do cartão de crédito"},"cpfCnpj":{"type":"integer","format":"int64","description":"Número do documento do cliente para geração do RPS"},"dadosCnpj":{"description":"Dados de pessoa jurídica.","$ref":"#/definitions/DadosCnpj"},"dadosCpf":{"description":"Dados de pessoa física.","$ref":"#/definitions/DadosCpf"},"faturado":{"type":"boolean","example":false,"description":"Valor faturado."},"guidGaragem":{"type":"string","description":"GUID da Garagem referente ao ticket do estacionamento. Caso não utilizado o sistema tentará buscar o ticket pelo ID ou em todas as garagens. Retorna erro se mais de um ticket for encontrado"},"idGaragem":{"type":"integer","format":"int64","description":"ID da Garagem referente ao ticket do estacionamento. Caso não utilizado o sistema tentará buscar o ticket pelo GUID ou em todas as garagens. Retorna erro se mais de um ticket for encontrado"},"idPromocao":{"type":"integer","format":"int64"},"idTransacao":{"type":"string","description":"Identificação única para a transação"},"notas":{"type":"array","items":{"type":"string"}},"numeroTicket":{"type":"string","description":"Número do código de barras do ticket do estacionamento"},"permitirValorExcedente":{"type":"boolean","example":false,"description":"Permitir pagamento com valor excedente."},"permitirValorParcial":{"type":"boolean","example":false,"description":"Permitir pagamento com valor parcial."},"tokenAutenticacao":{"type":"string","description":"O token de autenticação para a promoção."},"udid":{"type":"string","description":"Identificador único para o dispositivo"},"valor":{"type":"integer","format":"int32","description":"Valor do pagamento em centavos. Exemplo: para um pagamento de R$1,50 enviar 150"}},"title":"PagamentoAutorizadoRequest"},"PagamentoEfetuado":{"type":"object","required":["cnpjGaragem","data","estaticonamento","valorPago"],"properties":{"cnpjGaragem":{"type":"string","description":"CNPJ da Garagem"},"codigoAutorizacao":{"type":"string","description":"O Código de Autorização da nota fiscal."},"cpfCnpj":{"type":"string","description":"CPF enviado para geração de RPS no pagamento"},"data":{"type":"integer","format":"int64","description":"Data do servidor na hora do pagamento(Unix Epoch em milissegundos)"},"estaticonamento":{"type":"string","description":"Nome da Garagem associada ao ticket"},"linkLogoGaragem":{"type":"string","description":"Link de uma imagem para o estacionamento"},"nfseCodigoVerificacao":{"type":"string","description":"O código de verificação da nota fiscal."},"nfseNumero":{"type":"string","description":"O número da nota fiscal."},"nfseQrCode":{"type":"string","description":"O qrcode da nota fiscal. (Quando o nfseCodigoVerificacao estiver vazio este qrcode é da nota em contingência)"},"nsu":{"type":"string","description":"O Número Sequencial Único da nota fiscal."},"permanencia":{"type":"integer","format":"int64","description":"Data de entrada(Unix Epoch em milissegundos)"},"permanenciaFim":{"type":"integer","format":"int64","description":"Uma previsão da data permitida para saída se o ticket for pago com o valor atual (Unix Epoch em milissegundos)"},"prepago":{"type":"boolean","description":"Se o pagamento foi prepago"},"rps":{"type":"string","description":"O número do RPS gerado"},"serieRps":{"type":"string","description":"A série do RPS"},"ticket":{"type":"string","description":"O número do ticket"},"tipo":{"type":"string","description":"O tipo do serviço pago.","enum":["CARGA_CREDITO","CARTAO_DEBITO","TICKET"]},"valorDesconto":{"type":"integer","format":"int32","description":"Valor do desconto aplicado na tarifa em centavos(R$1,50 = 150)"},"valorPago":{"type":"integer","format":"int64","description":"Valor do pagamento"}},"title":"PagamentoEfetuado"},"ParkingGarageSales":{"type":"object","properties":{"current":{"type":"array","items":{"$ref":"#/definitions/Promocao"}}},"title":"ParkingGarageSales"},"ParkingTicket":{"type":"object","properties":{"saleId":{"type":"integer","format":"int64"},"ticketNumber":{"type":"string"},"userId":{"type":"string"}},"title":"ParkingTicket"},"ParkingTicketAuthorization":{"type":"object","properties":{"request":{"$ref":"#/definitions/PagamentoAutorizadoRequest"},"status":{"$ref":"#/definitions/PagamentoAutorizadoRequest"}},"title":"ParkingTicketAuthorization"},"ParkingTicketAuthorizedPaymentStatus":{"type":"object","properties":{"status":{"$ref":"#/definitions/RetornoPagamento"}},"title":"ParkingTicketAuthorizedPaymentStatus"},"ParkingTicketPaymentsMadeQuery":{"type":"object","properties":{"paginationLimit":{"type":"integer","format":"int32"},"paginationStart":{"type":"integer","format":"int32"},"userId":{"type":"string"}},"title":"ParkingTicketPaymentsMadeQuery"},"ParkingTicketPaymentsMadeStatus":{"type":"object","properties":{"status":{"type":"array","items":{"$ref":"#/definitions/PagamentoEfetuado"}}},"title":"ParkingTicketPaymentsMadeStatus"},"ParkingTicketStatus":{"type":"object","properties":{"status":{"$ref":"#/definitions/RetornoConsulta"}},"title":"ParkingTicketStatus"},"Promocao":{"type":"object","required":["descricao","exigeAutenticacao","horarioFim","horarioInicio","imagem","nome","quantidadeDisponivel","regulamento","systemId","tipoDesconto","tipoPromocao","titulo","validade","valorAlvo","valorDesconto"],"properties":{"bandeira":{"type":"string","description":"Bandeira caso o tipoPromoção seja BANDEIRA","enum":["AMEX","AURA","DINERS","DISCOVER","ELO","HIPERCARD","JCB","MASTERCARD","VISA"]},"descricao":{"type":"string","description":"A descrição da promoção"},"diasSemana":{"type":"array","items":{"type":"string","enum":["DOMINGO","QUARTA","QUINTA","SABADO","SEGUNDA","SEXTA","TERCA"]}},"exigeAutenticacao":{"type":"boolean","example":false,"description":"Se a promoção exige autenticação"},"horarioFim":{"type":"string","format":"date-time","description":"Horário em que a promoção pode ser utilizada (fim)"},"horarioInicio":{"type":"string","format":"date-time","description":"Horário em que a promoção pode ser utilizada (inicio)"},"imagem":{"type":"string","description":"Url para uma imagem para a promoção"},"nome":{"type":"string","description":"O nome da promoção (até 15 caracteres)"},"quantidadeDisponivel":{"type":"integer","format":"int32","description":"Quantidade disponível desta promoção"},"regulamento":{"type":"string","description":"A regulamentação da promoção"},"systemId":{"type":"integer","format":"int64","description":"O id da promoção"},"tipoDesconto":{"type":"string","description":"O tipo do desconto","enum":["MUDANCA_TARIFA","PERMANENCIA","PERMANENCIA_FINAL","PORCENTAGEM","VALOR"]},"tipoPromocao":{"type":"string","description":"O tipo da promoção","enum":["BANDEIRA","CUPOM"]},"titulo":{"type":"string","description":"Titulo da promoção"},"validade":{"type":"string","format":"date-time","description":"A data de validade da promoção"},"valorAlvo":{"type":"integer","format":"int32","description":"Valor necessário para atingir a promoção"},"valorDesconto":{"type":"integer","format":"int32","description":"Caso tipoDesconto; VALOR: valor do desconto; PORCENTAGEM: porcentagem de desconto; PERMANENCIA: tempo em minutos; MUDANCA_TARIFA: número da tabela de tarifa"}},"title":"Promocao"},"RetornoConsulta":{"type":"object","required":["cnpjGaragem","dataConsulta","dataDeEntrada","dataPermitidaSaida","errorCode","garagem","idGaragem","imagemLink","mensagem","notas","numeroTicket","promocaoAtingida","promocoesDisponiveis","setor","tarifa","tarifaPaga","tarifaSemDesconto","ticketValido","valorDesconto"],"properties":{"cnpjGaragem":{"type":"string","description":"CNPJ da Garagem"},"dataConsulta":{"type":"integer","format":"int64","description":"Data do servidor no momento da consulta(Unix Epoch em milissegundos)"},"dataDeEntrada":{"type":"integer","format":"int64","description":"Data de entrada(Unix Epoch em milissegundos)"},"dataPermitidaSaida":{"type":"integer","format":"int64","description":"Uma previsão da data permitida para saída se o ticket for pago com o valor atual (Unix Epoch em milissegundos)"},"dataPermitidaSaidaUltimoPagamento":{"type":"integer","format":"int64","description":"Se o ticket já possuir pagamento, esta é a data permitida para a saída calculada no mesmo"},"errorCode":{"type":"integer","format":"int32","description":"Código de erro"},"garagem":{"type":"string","description":"Nome da Garagem associada ao ticket"},"idGaragem":{"type":"integer","format":"int64","description":"ID da Garagem"},"idPromocao":{"type":"integer","format":"int64","description":"O id da promoção(O mesmo do request)"},"imagemLink":{"type":"string","description":"Link de uma imagem para o estacionamento"},"mensagem":{"type":"string","description":"Mensagem de erro"},"notas":{"type":"array","description":"Lista com as informações sobre as notas enviadas","items":{"$ref":"#/definitions/NotaInfo"}},"numeroTicket":{"type":"string","description":"O número do ticket"},"promocaoAtingida":{"type":"boolean","example":false,"description":"Se a promoção existe e foi atingida"},"promocoesDisponiveis":{"type":"boolean","example":false,"description":"Se existem promoções cadastradas para a garagem do ticket"},"setor":{"type":"string","description":"Setor do ticket"},"tarifa":{"type":"integer","format":"int32","description":"Valor TOTAL da tarifa do ticket em centavos(R$1,50 = 150). Este valor ignora o valor já pago, mas não ignora descontos. ATENÇÃO: Este valor é zero quando o ticket está na tolerância!"},"tarifaPaga":{"type":"integer","format":"int32","description":"Valor da tarifa já paga em centavos(R$1,50 = 150). Para calcular o valor a pagar utilize 'max(tarifa - tarifaPaga, 0)'"},"tarifaSemDesconto":{"type":"integer","format":"int32","description":"Valor TOTAL e sem desconto da tarifa do ticket em centavos(R$1,50 = 150)."},"ticketValido":{"type":"boolean","example":false,"description":"Se o ticket consultado é válido"},"valorDesconto":{"type":"integer","format":"int32","description":"Valor do desconto aplicado na tarifa em centavos(R$1,50 = 150)"}},"title":"RetornoConsulta"},"RetornoPagamento":{"type":"object","required":["comprovante","dataHoraSaida","dataPagamento","errorCode","mensagem","numeroTicket","rps","serieRps","ticketPago"],"properties":{"cartaoCriptografado":{"type":"string","description":"O cartão criptografado se solicitado"},"comprovante":{"type":"string","description":"Texto com o comprovante de pagamento do ticket"},"dataHoraSaida":{"type":"integer","format":"int64","description":"Data e hora permitida para a saída do estacionamento(Unix Epoch em milissegundos)"},"dataPagamento":{"type":"integer","format":"int64","description":"Data do servidor na hora do pagamento(Unix Epoch em milissegundos)"},"errorCode":{"type":"integer","format":"int32","description":"Código de erro"},"mensagem":{"type":"string","description":"Mensagem de erro"},"numeroTicket":{"type":"string","description":"O número do ticket"},"rps":{"type":"string","description":"O número do RPS gerado"},"serieRps":{"type":"string","description":"A série do RPS"},"ticketPago":{"type":"boolean","example":false,"description":"Se o ticket foi pago"}},"title":"RetornoPagamento"}}}